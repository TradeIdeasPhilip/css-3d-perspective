(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))p(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&p(y)}).observe(document,{childList:!0,subtree:!0});function w(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function p(l){if(l.ep)return;l.ep=!0;const f=w(l);fetch(l.href,f)}})();var P={},j;function W(){return j||(j=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.countMap=r.Random=r.phi=r.radiansPerDegree=r.degreesPerRadian=r.FULL_CIRCLE=r.FIGURE_SPACE=r.NON_BREAKING_SPACE=r.MIN_DATE=r.MAX_DATE=r.csvStringToArray=void 0,r.assertClass=h,r.assertNonNullable=w,r.sleep=p,r.testXml=l,r.parseXml=f,r.followPath=y,r.getAttribute=A,r.parseFloatX=N,r.parseIntX=b,r.parseTimeT=$,r.pickAny=k,r.pick=T,r.take=u,r.filterMap=o,r.makePromise=a,r.dateIsValid=d,r.angleBetween=m,r.positiveModulo=g,r.rotateArray=M,r.rectUnion=H,r.rectAddPoint=Q,r.dateToFileName=K,r.lerp=V,r.assertFinite=x,r.shuffleArray=ee,r.zip=te,r.count=ne,r.initializedArray=X,r.sum=re,r.makeLinear=ie,r.makeBoundedLinear=oe,r.polarToRectangular=ae,r.permutations=z,r.gcd=_,r.lcm=ce;function h(e,t,i="Assertion Failed."){const n=s=>{throw new Error(`${i}  Expected type:  ${t.name}.  Found type:  ${s}.`)};if(e===null)n("null");else if(typeof e!="object")n(typeof e);else if(!(e instanceof t))n(e.constructor.name);else return e;throw new Error("wtf")}function w(e){if(e==null)throw new Error("wtf");return e}function p(e){return new Promise(t=>{setTimeout(t,e)})}function l(e){const i=new DOMParser().parseFromString(e,"application/xml");for(const n of Array.from(i.querySelectorAll("parsererror")))if(n instanceof HTMLElement)return{error:n};return{parsed:i}}function f(e){if(e!==void 0){const{parsed:t}=l(e);return t?.documentElement}}function y(e,...t){for(const i of t){if(e===void 0)return;if(typeof i=="number")e=e.children[i];else{const n=e.getElementsByTagName(i);if(n.length!=1)return;e=n[0]}}return e}function A(e,t,...i){if(t=y(t,...i),t!==void 0&&t.hasAttribute(e))return t.getAttribute(e)??void 0}function N(e){if(e==null)return;const t=+e;if(isFinite(t))return t}function b(e){const t=N(e);if(t!==void 0)return t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||t!=Math.floor(t)?void 0:t}function $(e){if(typeof e=="string"&&(e=b(e)),e!=null&&!(e<=0))return new Date(e*1e3)}const R=e=>{const t=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,i=[[]];let n;for(;n=t.exec(e);)n[1].length&&n[1]!==","&&i.push([]),i[i.length-1].push(n[2]!==void 0?n[2].replace(/""/g,'"'):n[3]);return i};r.csvStringToArray=R;function k(e){const t=e.values().next();if(!t.done)return t.value}function T(e){if(e.length==0)throw new Error("wtf");return e[Math.random()*e.length|0]}function u(e){if(e.length<1)throw new Error("wtf");const t=Math.random()*e.length|0;return e.splice(t,1)[0]}function o(e,t){const i=[];return e.forEach((n,s)=>{const c=t(n,s);c!==void 0&&i.push(c)}),i}function a(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),resolve:e,reject:t}}r.MAX_DATE=new Date(864e13),r.MIN_DATE=new Date(-864e13);function d(e){return isFinite(e.getTime())}r.NON_BREAKING_SPACE=" ",r.FIGURE_SPACE=" ",r.FULL_CIRCLE=2*Math.PI,r.degreesPerRadian=360/r.FULL_CIRCLE,r.radiansPerDegree=r.FULL_CIRCLE/360,r.phi=(1+Math.sqrt(5))/2;function m(e,t){const i=g(e,r.FULL_CIRCLE);let s=g(t,r.FULL_CIRCLE)-i;const c=r.FULL_CIRCLE/2;if(s>c?s-=r.FULL_CIRCLE:s<-c&&(s+=r.FULL_CIRCLE),Math.abs(s)>c)throw new Error("wtf");return s}function g(e,t){const i=e%t;return i<0?i+Math.abs(t):i}function M(e,t){if((t|0)!=t)throw new Error(`invalid input: ${t}`);return t=g(t,e.length),t==0?e:[...e.slice(t),...e.slice(0,t)]}class J{constructor(){throw new Error("wtf")}static sfc32(t,i,n,s){function c(){t|=0,i|=0,n|=0,s|=0;let L=(t+i|0)+s|0;return s=s+1|0,t=i^i>>>9,i=n+(n<<3)|0,n=n<<21|n>>>11,n=n+L|0,(L>>>0)/4294967296}const S=c;return Object.defineProperty(S,"currentSeed",{get(){return JSON.stringify([t,i,n,s])}}),S}static#e=42;static seedIsValid(t){try{return this.create(t),!0}catch{return!1}}static create(t=this.newSeed()){console.info(t);const i=JSON.parse(t);if(!(i instanceof Array))throw new Error("invalid input");if(i.length!=4)throw new Error("invalid input");const[n,s,c,S]=i;if(!(typeof n=="number"&&typeof s=="number"&&typeof c=="number"&&typeof S=="number"))throw new Error("invalid input");return this.sfc32(n,s,c,S)}static newSeed(){const t=[];return t.push(Date.now()|0),t.push(this.#e++|0),t.push(Math.random()*2**31|0),t.push(performance.now()*1e4|0),JSON.stringify(t)}static fromString(t){try{return this.create(t)}catch{return this.create(this.anyStringToSeed(t))}}static anyStringToSeed(t){function i(c,S){return(c<<S|c>>>32-S)>>>0}const n=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(t).forEach(c=>{n[0]^=c,n[0]=i(n[0],3),n[1]^=c,n[1]=i(n[1],5),n[2]^=c,n[2]=i(n[2],7),n[3]^=c,n[3]=i(n[3],11)}),n[0]^=i(n[1],7),n[1]^=i(n[2],11),n[2]^=i(n[3],13),n[3]^=i(n[0],17),JSON.stringify(n)}static test(){const n=[this.create()];for(;n.length<=10;){for(let c=0;c<20;c++){const S=n.map(L=>L());for(let L=1;L<S.length;L++)if(S[L]!==S[0]){debugger;throw new Error("wtf")}}const s=T(n).currentSeed;n.forEach(c=>{if(c.currentSeed!=s){debugger;throw new Error("wtf")}}),n.push(this.create(s))}}}r.Random=J;function H(e,t){const i=Math.min(e.x,t.x),n=Math.min(e.y,t.y),s=Math.max(e.x+e.width,t.x+t.width),c=Math.max(e.y+e.height,t.y+t.height),S=s-i,L=c-n;return{x:i,y:n,width:S,height:L}}function Q(e,t,i){return H(e,{x:t,y:i,width:0,height:0})}function K(e){return isNaN(e.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${e.getFullYear().toString().padStart(4,"0")}⸱${(e.getMonth()+1).toString().padStart(2,"0")}⸱${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}⦂${e.getMinutes().toString().padStart(2,"0")}⦂${e.getSeconds().toString().padStart(2,"0")}`}function V(e,t,i){return e+(t-e)*i}function x(...e){e.forEach(t=>{if(!Number.isFinite(t))throw new Error("wtf")})}function ee(e){for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function*te(...e){const t=e.map(i=>i[Symbol.iterator]());for(;;){const i=t.map(n=>n.next());if(i.some(({done:n})=>n))break;yield i.map(({value:n})=>n)}}function*ne(e=0,t=1/0,i=1){for(let n=e;n<t;n+=i)yield n}function X(e,t){const i=[];for(let n=0;n<e;n++)i.push(t(n));return i}r.countMap=X;function re(e){return e.reduce((t,i)=>t+i,0)}function ie(e,t,i,n){const s=(n-t)/(i-e);return function(c){return(c-e)*s+t}}function oe(e,t,i,n){i<e&&([e,t,i,n]=[i,n,e,t]);const s=(n-t)/(i-e);return function(c){return c<=e?t:c>=i?n:(c-e)*s+t}}function ae(e,t){return{x:Math.cos(t)*e,y:Math.sin(t)*e}}function*z(e,t=[]){if(e.length==0)yield t;else for(let i=0;i<e.length;i++){const n=e[i],s=[...t,n],c=[...e.slice(0,i),...e.slice(i+1)];yield*z(c,s)}}function _(e,t){return t?_(t,e%t):e}function ce(e,t){return e*t/_(e,t)}})(P)),P}var v=W(),E={},G;function se(){if(G)return E;G=1,Object.defineProperty(E,"__esModule",{value:!0}),E.AnimationLoop=void 0,E.getById=h,E.selectorQueryAll=w,E.querySelectorAll=p,E.selectorQuery=l,E.querySelector=f,E.loadDateTimeLocal=y,E.getBlobFromCanvas=A,E.getAudioBalanceControl=N,E.getHashInfo=b,E.createElementFromHTML=$,E.download=R,E.getDataUrl=T;const r=W();function h(u,o){const a=document.getElementById(u);if(!a)throw new Error("Could not find element with id "+u+".  Expected type:  "+o.name);if(a instanceof o)return a;throw new Error("Element with id "+u+" has type "+a.constructor.name+".  Expected type:  "+o.name)}function w(u,o,a=1,d=1/0,m=document){const g=[];if(m.querySelectorAll(u).forEach(M=>{g.push((0,r.assertClass)(M,o))}),g.length<a||g.length>d)throw new Error(`Expecting "${u}" to return [${a} - ${d}] instances of ${o.name}, found ${g.length}.`);return g}function p(u,o,a=1,d=1/0,m=document){const g=[];if(m.querySelectorAll(u).forEach(M=>{g.push((0,r.assertClass)(M,o))}),g.length<a||g.length>d)throw new Error(`Expecting "${u}" to return [${a} - ${d}] instances of ${o.name}, found ${g.length}.`);return g}function l(u,o,a=document){return w(u,o,1,1,a)[0]}function f(u,o,a=document){return p(u,o,1,1,a)[0]}function y(u,o,a="milliseconds"){let d;switch(a){case"minutes":{d=o.getSeconds()*1e3+o.getMilliseconds();break}case"seconds":{d=o.getMilliseconds();break}case"milliseconds":{d=0;break}default:throw new Error("wtf")}u.valueAsNumber=+o-o.getTimezoneOffset()*6e4-d}function A(u){const{reject:o,resolve:a,promise:d}=(0,r.makePromise)();return u.toBlob(m=>{m?a(m):o(new Error("blob is null!"))}),d}function N(u){const o=new AudioContext,a=o.createMediaElementSource(u),d=new StereoPannerNode(o,{pan:0});return a.connect(d).connect(o.destination),m=>{d.pan.value=m}}function b(){const u=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(d=>{const m=d.split("=",2);if(m.length==2){const g=decodeURIComponent(m[0]),M=decodeURIComponent(m[1]);u.set(g,M)}}),u}function $(u,o){var a=document.createElement("div");return a.innerHTML=u.trim(),(0,r.assertClass)(a.firstChild,o,"createElementFromHTML:")}function R(u,o){var a=document.createElement("a");if(a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),a.setAttribute("download",u),document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0),a.dispatchEvent(d)}else a.click()}class k{onWake;constructor(o){this.onWake=o,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#e=!1;cancel(){this.#e=!0}callback(o){this.#e||(requestAnimationFrame(this.callback),this.onWake(o))}}E.AnimationLoop=k;async function T(u){const o=document.createElement("img");o.src=u,await o.decode();const a=o.naturalHeight,d=o.naturalWidth;if(a==0||d==0)throw new Error("problem with image");const m=document.createElement("canvas");m.width=d,m.height=a;const g=m.getContext("2d");if(!g)throw new Error("wtf");return g.drawImage(o,0,0,m.width,m.height),m.toDataURL()}return E}var C=se();const O=C.querySelector(".cube",HTMLDivElement),le=v.assertNonNullable(O.parentElement);O.remove();const U=7,q=5,D=7,F=v.initializedArray(U,()=>v.initializedArray(q,()=>v.initializedArray(D,()=>null))),ue=3,B=3,I=ue+B,Z=new Set;for(let r=0;r<D;r++){const h=`${(r-D)*I}lh`;Z.add(h);for(let w=0;w<U;w++){const p=`${(w+1)*I}lh`;for(let l=0;l<q;l++){const f=`${l*I}lh`,y=v.assertClass(O.cloneNode(!0),HTMLDivElement);y.style.transform=`translateX(${p}) translateY(${f}) translateZ(${h}) rotateY(var(--rotation))`,le.append(y),F[w][l][r]=y}}}console.log([...Z]);{let r=function(){switch(C.querySelector('[name="rotateStage"]:checked',HTMLInputElement).value){case"45":{h.style.transform=l;break}case"0":{h.style.transform="";break}default:throw new Error("wtf")}};const h=C.getById("stage",HTMLDivElement),w=U*I-B;h.style.width=`${w}lh`;const p=q*I-B;h.style.height=`${p}lh`;const l="translateZ(-27lh) rotateY(45deg) translateZ(27lh)";r(),C.querySelectorAll('[name="rotateStage"]',HTMLInputElement).forEach(f=>{f.addEventListener("input",r)})}F.forEach((r,h)=>{r.forEach((w,p)=>{w.forEach((l,f)=>{if(!l)throw new Error(`Missing at (${h}, ${p}, ${f})`)})})});window.allCubes=F;F.forEach((r,h)=>{r.forEach((w,p)=>{const l=w.toReversed();l[0].addEventListener("click",()=>{l.forEach((f,y)=>{f.getAnimations().forEach(A=>{A.cancel()}),f.animate([{"--rotation":"0deg"},{"--rotation":"360deg"}],{duration:4e3,easing:"cubic-bezier(0.7, -0.67, 0.33, 1.66)",delay:1500*y})})})})});const Y=C.getById("container1",HTMLDivElement);document.addEventListener("mousemove",r=>{const h=Y.getBoundingClientRect(),w=r.clientX-h.left,p=r.clientY-h.top;Y.style.perspectiveOrigin=`${w}px ${p}px`});
